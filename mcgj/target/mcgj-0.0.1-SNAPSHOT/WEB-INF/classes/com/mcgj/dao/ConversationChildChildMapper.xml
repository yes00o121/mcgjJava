<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	
<mapper namespace="com.mcgj.dao.ConversationChildChildMapper">
	<!-- 根据id查询贴子数据 -->
	<select id="selectCCCByCCId" resultType="Map">
		select 
			ccc.id,
			cc.id as conversationChildId,
			ccc.content,
			u.user_name as userName,
			DATE_FORMAT(ccc.create_date,'%Y-%m-%d %H:%i:%s') as createDate,
			ccc.ISMANAGE as isManage,
			u.photo
		from conversation_child_child ccc 
		LEFT JOIN conversation_child cc on cc.id = ccc.CONVERSATION_CHILD_ID
		LEFT JOIN user u on u.id = ccc.USER_ID
		where ccc.CONVERSATION_CHILD_ID = #{conversationChildId} and ccc.state = 1 
	</select>
	<!-- 新增楼层方法 -->
	<insert id="insert" parameterType="com.mcgj.entity.ConversationChildChild">
		insert into conversation_child_child(id,create_date,conversation_child_id,user_id,content,state,isManage)values(#{id},#{createDate},#{conversationChildId},#{userId},#{content},#{state},#{isManage})
	</insert>
</mapper>